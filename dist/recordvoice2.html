<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hack Talk - To Be A Good Presenter</title>
    <!-- Meta SEO -->
    <meta name="title" content="Hack Talk Page">
    <meta name="description" content="Get started with a free and open-source landing page built with Tailwind CSS and the Flowbite component library.">
    <meta name="robots" content="index, follow">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="language" content="English">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Flex:opsz,wght@8..144,100..1000&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@700&display=swap" rel="stylesheet">

    <link rel="icon" href="../assets/logo 2.png">
    <link rel="stylesheet" href="../src/output.css">
</head>

<body>
    <header class="sticky left-0 top-0 z-50 w-full">
        <nav class="bg-white py-0 backdrop-blur-md bg-white/90">
            <div class="flex flex-wrap items-center justify-between max-w-screen-xl px-4 mx-auto border-b border-Boulder/10 py-6">
                <a href="#" class="flex items-center">
                    <img src="../assets/logo.svg" class="h-6 mr-3 sm:h-9" alt="HackTalk Logo" />
                </a>
                <div class="flex items-center lg:order-2">
                    <a href="login.html" class="block py-2 mr-6 text-SteelBlue font-medium text-[19px] lg:hover:bg-transparent lg:border-0 lg:p-0">Login</a>
                    <a href="signup.html" class="text-white bg-SteelBlue hover:shadow-md hover:shadow-SteelBlue/20 font-medium rounded-[20px] text-lg px-6 lg:px-[28px] py-[6px] lg:py-[8.2px] sm:mr-2 lg:mr-0 focus:outline-none">Sign
                        Up</a>

                    <button data-collapse-toggle="mobile-menu-2" type="button" class="inline-flex items-center p-2 ml-3 text-sm text-SteelBlue rounded-lg lg:hidden focus:outline-none " aria-controls="mobile-menu-2" aria-expanded="false">
                        <span class="sr-only">Open main menu</span>
                        <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd"
                                d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z"
                                clip-rule="evenodd"></path>
                        </svg>
                        <svg class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20"
                            xmlns="http://www.w3.org/2000/svg">
                            <path fill-rule="evenodd"
                                d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                                clip-rule="evenodd"></path>
                        </svg>
                    </button>
                </div>
                <div class="items-center justify-between hidden w-full lg:flex lg:w-auto lg:order-1" id="mobile-menu-2">
                    <ul class="flex flex-col mt-4 font-medium lg:flex-row lg:space-x-8 lg:mt-0">
                        <li>
                            <a href="index.html" class="block py-2 pl-7 pr-[10px] text-Boulder lg:hover:border-b-[2px] hover:border-solid hover:border-SteelBlue text-[17px] bg-purple-700 lg:hover:text-SteelBlue lg:bg-transparent lg:p-0" aria-current="page">Home</a>
                        </li>
                        <li>
                            <a href="features.html" class="block py-2 pl-7 pr-9 text-Boulder text-[17px] lg:hover:border-b-[2px] hover:border-solid hover:border-SteelBlue lg:hover:bg-transparent lg:border-0 lg:hover:text-SteelBlue lg:p-0">Features</a>
                        </li>
                        <li>
                            <a href="contact.html" class="block py-2 pl-7 pr-9 text-Boulder text-[17px] lg:hover:border-b-[2px] hover:border-solid hover:border-SteelBlue lg:hover:bg-transparent lg:border-0 lg:hover:text-SteelBlue lg:p-0">Contact
                                us</a>
                        </li>
                        <li>
                            <a href="Dashboard.html" class="block py-2 pl-7 pr-9 text-Boulder text-[17px] lg:hover:border-b-[2px] hover:border-solid hover:border-SteelBlue lg:hover:bg-transparent lg:border-0 lg:hover:text-SteelBlue lg:p-0">Setting</a>
                        </li>
                    </ul>
                </div>
            </div>

        </nav>
    </header>
    <div class="mt-5 bg-[#FFFFFF] flex flex-col p-[32px_10px_125px_10px] xl:p-[32px_40px_125px_40px] w-full  box-sizing-border">
        <div class="m-[0_3.7px_0_3.7px] flex flex-row justify-between self-start w-full md:w-[82.2px] box-sizing-border">
            <a href="recordVoice1.html" class="m-[13px_0_0_0] flex flex-row justify-center w-[23.8px] h-[20px] box-sizing-border">
                <img src="../assets/arrow.svg" class="w-[23.8px] h-[20px]" />
            </a>
        </div>
        <span class="break-words font-['Roboto_Flex'] mb-20 text-center font-semibold  text-[32px] text-[#4692B6]">
            Record Voice
        </span>

        <div class="flex flex-col w-full  box-sizing-border mt-20 md:mt-44 ">
            <div class="mx-auto relative flex flex-col justify-center items-center w-full md:w-[400px] lg:w-[460px] 2xl:w-[620px] h-[550px] md:h-[420px]">
                <button id="recordButton">
                    <img src="../assets/soundrecord.png" class="m-[0_0_5px_0] w-fit h-[350px]" />
                </button>
                <div class="timer text-[#9A9A9A] font['Roboto-Flex'] font-semibold text-[32px]">
                    <span class="hours">00</span>
                    <span>:</span>
                    <span id="minutes">10</span>
                    <span>:</span>
                    <span class="seconds">00</span>
                </div>
                <div>
                    <div class="loader mt-12">
                        <span class="stroke"></span>
                        <span class="stroke"></span>
                        <span class="stroke"></span>
                        <span class="stroke"></span>
                        <span class="stroke"></span>
                        <span class="stroke"></span>
                        <span class="stroke"></span>
                        <span class="stroke"></span>
                        <span class="mediumStroke"></span>
                        <span class="largeStroke"></span>
                        <span class="stroke"></span>
                        <span class="stroke"></span>
                        <span class="stroke"></span>
                        <span class="stroke"></span>
                        <span class="stroke"></span>
                        <span class="stroke"></span>
                        <span class="stroke"></span>
                        <span class="stroke"></span>
                        <span class="stroke"></span>
                        <span class="stroke"></span>
                        <span class="mediumStroke"></span>
                        <span class="largeStroke"></span>
                        <span class="stroke"></span>
                        <span class="stroke"></span>
                        <span class="stroke"></span>
                        <span class="stroke"></span>
                        <span class="stroke"></span>
                        <span class="stroke"></span>
                        <span class="stroke"></span>
                        <span class="mediumStroke"></span>
                        <span class="largeStroke"></span>
                        <span class="stroke"></span>
                        <span class="stroke"></span>
                        <span class="stroke"></span>
                        <span class="stroke"></span>
                        <span class="stroke"></span>
                        <span class="mediumStroke"></span>
                        <span class="largeStroke"></span>
                    </div>
                </div>
                <div class="items-center justify-between mt-14 mb-10">
                    <button class="mr-9 cursor-default"><img class="" src="../assets/alarm.svg" alt="">
                        <p class="text-[#4692B6] font['Roboto-Flex'] font-semibold text-[15px]">1:30 m</p>
                    </button>
                    <button id="pauseButton" class="mr-9"><img src="../assets/redpause.svg" alt=""></button>
                    <button id="submitButton" class="mr-9"><img src="../assets/pause.svg" alt=""></button>
                </div>
                <div class="relative flex flex-row justify-center p-[12px_0.5px_0_0] box-sizing-border w-full md:w-[660px] lg:w-[380px] xl:w-[550px] 2xl:w-[660px]">
                    <a href="#" onclick="location.href='recordVoice1.html'; return false;" class="mb-10 mt-4 text-center rounded-[40px] border-[1px_solid_#4692B6] bg-[#FFFFFF] p-[12px_0.5px_12px_0] w-full md:w-[660px] lg:w-[380px] xl:w-[550px] 2xl:w-[660px] box-sizing-border break-words font-['Roboto'] font-medium text-[24px] text-[#4692B6] border-2 border-SteelBlue hover:shadow-md hover:shadow-SteelBlue/20 ">
                        Cancel
                    </a>
                </div>
            </div>
        </div>
        <script src='/src/lame.min.js'></script>

        <script>
            // Get references to elements
            const recordButton = document.getElementById('recordButton');
            const pauseButton = document.getElementById('pauseButton');
            const submitButton = document.getElementById('submitButton');
            const minutesElement = document.getElementById('minutes');
            const secondsElement = document.querySelector('.seconds');

            let mediaRecorder;
            let timerInterval;
            let totalSeconds = 600; // 10 minutes
            let audioChunks = [];

            // Function to start recording
            async function startRecording() {
                recordButton.removeEventListener('click', startRecording);
                pauseButton.addEventListener('click', pauseRecording);

                try {
                    const stream = await navigator.mediaDevices.getUserMedia({
                        audio: true
                    });
                    mediaRecorder = new MediaRecorder(stream);

                    mediaRecorder.ondataavailable = (event) => {
                        audioChunks.push(event.data);
                    };

                    mediaRecorder.start();
                    console.log('Recording started...');

                    timerInterval = setInterval(updateTimer, 1000);
                } catch (err) {
                    console.error('Error accessing microphone:', err);
                }
            }

            // Function to pause recording
            function pauseRecording() {
                pauseButton.removeEventListener('click', pauseRecording);
                recordButton.addEventListener('click', startRecording);

                mediaRecorder.stop();
                clearInterval(timerInterval);

                console.log('Recording paused...');
            }

            // Function to update timer display
            function updateTimer() {
                totalSeconds--;
                const minutes = Math.floor(totalSeconds / 60);
                const seconds = totalSeconds % 60;

                minutesElement.textContent = minutes < 10 ? `0${minutes}` : minutes;
                secondsElement.textContent = seconds < 10 ? `0${seconds}` : seconds;

                if (totalSeconds <= 0) {
                    clearInterval(timerInterval);
                    mediaRecorder.stop();
                    console.log('Time is up!');
                }
            }

            // Function to send recorded audio to the server
            async function sendAudio() {
                // Assuming audioChunks is your array of audio data chunks
                const audioBlob = new Blob(audioChunks, {
                    type: 'audio/wav'
                });

                // Convert WAV to MP3
                const mp3BlobParts = [];
                const mp3Encoder = new lamejs.Mp3Encoder(1, 44100, 128); // mono 44.1khz encode to 128kbps
                const maxSamples = 1152; // typical for LAME

                let remaining = audioBlob.size;
                let offset = 0;

                while (remaining > 0) {
                    const read = Math.min(remaining, maxSamples * 2); // 2 bytes per sample
                    const arrayBuffer = await audioBlob.slice(offset, offset + read).arrayBuffer();
                    const samples = new Int16Array(arrayBuffer);

                    const mp3buf = mp3Encoder.encodeBuffer(samples);
                    if (mp3buf.length > 0) {
                        mp3BlobParts.push(mp3buf);
                    }

                    offset += read;
                    remaining -= read;
                }

                const finalMp3buf = mp3Encoder.flush();
                if (finalMp3buf.length > 0) {
                    mp3BlobParts.push(finalMp3buf);
                }

                const mp3Blob = new Blob(mp3BlobParts, {
                    type: 'audio/mpeg'
                });
                const mp3File = new File([mp3Blob], 'audio.mp3', {
                    type: 'audio/mpeg'
                });

                async function uploadFile(file) {
                    const formData = new FormData();
                    formData.append('file', file);
                    console.log(file)

                    const response = await fetch('https://ca3a-156-203-149-132.ngrok-free.app/predict_Audio_Analysis', {
                        method: 'POST',
                        body: formData
                    });

                    if (response.ok) {
                        const audioAnalysis = await response.json(); // Read and parse JSON once
                        localStorage.setItem('audioAnalysis', JSON.stringify(audioAnalysis));
                        window.location.href = 'voiceresult.html';
                    }

                }

                uploadFile(mp3File);
            }

            // Event listener for starting recording
            recordButton.addEventListener('click', startRecording);

            // Event listener for submitting recording
            submitButton.addEventListener('click', () => {
                mediaRecorder.stop();
                sendAudio();
            });
        </script>
    </div>
    </div>
</body>

</html>

lastModified
<!-- : 
1719339004514
lastModifiedDate
: 
Tue Jun 25 2024 21:10:04 GMT+0300 (Eastern European Summer Time) {}
name
: 
"test.mp3"
size
: 
2070706
type
: 
"audio/mpeg"
webkitRelativePath
: 
"" -->
<!-- lastModified
: 
1719355374476
lastModifiedDate
: 
Wed Jun 26 2024 01:42:54 GMT+0300 (Eastern European Summer Time) {}
name
: 
"audio.mp3"
size
: 
417
type
: 
"audio/mpeg"
webkitRelativePath
: 
"" -->