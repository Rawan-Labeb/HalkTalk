<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="">
    <title>Hack Talk - To Be A Good Presenter</title>
    <!-- Meta SEO -->
    <meta name="title" content="Hack Talk Page">
    <meta name="description" content="Get started with a free and open-source landing page built with Tailwind CSS and the Flowbite component library.">
    <meta name="robots" content="index, follow">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <meta name="language" content="English">

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Flex:opsz,wght@8..144,100..1000&family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap" rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@700&display=swap" rel="stylesheet">

    <link rel="icon" href="../assets/logo 2.png">
    <link rel="stylesheet" href="../src/output.css">
</head>

<body>
    <header class="left-0 top-0 w-full">
        <nav class="bg-white py-0 backdrop-blur-md bg-white/90">
            <div class="flex flex-wrap items-center justify-between max-w-screen-xl px-4 mx-auto border-b border-Boulder/10 py-6">
                <a href="#" class="flex items-center">
                    <img src="../assets/logo.svg" class="h-6 mr-3 sm:h-9" alt="HackTalk Logo" />
                </a>
                <div class="flex items-center lg:order-2">
                    <a href="login.html" class="block py-2 mr-6  text-SteelBlue font-medium text-[19px] lg:hover:bg-transparent lg:border-0 lg:p-0">Login</a>
                    <a href="signup.html" class="text-white bg-SteelBlue hover:shadow-md hover:shadow-SteelBlue/20 font-medium rounded-[20px] text-lg px-6 lg:px-[28px] py-[6px] lg:py-[8.2px] sm:mr-2 lg:mr-0 focus:outline-none">Sign
                            Up</a>


                    <button data-collapse-toggle="mobile-menu-2" type="button" class="inline-flex items-center p-2 ml-3 text-sm text-SteelBlue rounded-lg lg:hidden focus:outline-none " aria-controls="mobile-menu-2" aria-expanded="false">
                            <span class="sr-only">Open main menu</span>
                            <svg class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20"
                                xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd"
                                    d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z"
                                    clip-rule="evenodd"></path>
                            </svg>
                            <svg class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20"
                                xmlns="http://www.w3.org/2000/svg">
                                <path fill-rule="evenodd"
                                    d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                                    clip-rule="evenodd"></path>
                            </svg>
                        </button>
                </div>
                <div class="items-center justify-between hidden w-full lg:flex lg:w-auto lg:order-1" id="mobile-menu-2">
                    <ul class="flex flex-col mt-4 font-medium lg:flex-row lg:space-x-8 lg:mt-0">
                        <li>
                            <a href="index.html" class="block py-2 pl-7 pr-[10px] text-Boulder lg:hover:border-b-[2px] hover:border-solid hover:border-SteelBlue text-[17px] bg-purple-700 lg:hover:text-SteelBlue lg:bg-transparent lg:p-0" aria-current="page">Home</a>
                        </li>
                        <li>
                            <a href="features.html" class="block py-2 pl-7 pr-9 text-Boulder text-[17px] lg:hover:border-b-[2px] hover:border-solid hover:border-SteelBlue lg:hover:bg-transparent lg:border-0 lg:hover:text-SteelBlue lg:p-0">Features</a>
                        </li>
                        <li>
                            <a href="contact.html" class="block py-2 pl-7 pr-9 text-Boulder text-[17px] lg:hover:border-b-[2px] hover:border-solid hover:border-SteelBlue lg:hover:bg-transparent lg:border-0 lg:hover:text-SteelBlue lg:p-0">Contact
                                    us</a>
                        </li>
                        <li>
                            <a href="Dashboard.html" class="block py-2 pl-7 pr-9 text-Boulder text-[17px] lg:hover:border-b-[2px] hover:border-solid hover:border-SteelBlue lg:hover:bg-transparent lg:border-0 lg:hover:text-SteelBlue lg:p-0">Setting</a>
                        </li>
                    </ul>
                </div>
            </div>

        </nav>
    </header>
    <div class="m-[50px_40px_0_40px] flex flex-col md:flex-row self-start box-sizing-border">
        <div class="rounded-[40px] bg-[#FBFBFB] relative m-[20px_10px_40px_0] md:m-[20px_80px_405px_0] flex flex-col p-[40px_17.4px_39px_22px] box-sizing-border">
            <div class="m-[0_0_15px_3.3px] flex flex-row w-[fit-content] box-sizing-border">
                <div class="m-[2.7px_11.3px_3.7px_0] flex flex-row justify-center w-[20px] h-[20px] box-sizing-border">
                    <img src="../assets/personal Information.png" class="w-[20px] h-[20px]" />
                </div>
                <a href="Dashboard.html" class="break-words font-['Roboto_Flex'] font-medium text-[20px] text-[#7A7A7A] hover:text-[#4692B6]">
              personal information 
                </a>
            </div>
            <div class="m-[0_0_15px_0] flex flex-row self-start w-[fit-content] box-sizing-border">
                <img src="../assets/changePass.png" class="m-[1px_8px_2px_0] w-[20px] h-[20px]" />
                <a href="changePassDashboard.html" class="break-words font-['Roboto_Flex'] font-medium text-[20px] text-[#7A7A7A] focus:text-[#4692B6] hover:text-[#4692B6]">
              Change password 
                </a>
            </div>
            <div class="m-[0_3.3px_16px_3.3px] flex flex-row self-start w-[fit-content] box-sizing-border">
                <div class="m-[1.7px_11.3px_4.7px_0] flex flex-row justify-center w-[20px] h-[20px] box-sizing-border">
                    <img src="../assets/rateApp.png" class="w-[20px] h-[20px]" />
                </div>
                <a href="rate.html" class="break-words font-['Roboto_Flex'] font-medium text-[20px] text-[#7A7A7A] focus:text-[#4692B6] hover:text-[#4692B6]">
              Rate this app
                </a>
            </div>
            <div class="m-[0_117px_0_0] flex flex-row self-start w-[fit-content] box-sizing-border">
                <div class="m-[3px_11px_4px_0] flex flex-row justify-start w-[20px] h-[20px] box-sizing-border">
                    <img src="../assets/logOut.png" class="w-[20px] h-[20px]]" />
                </div>
                <a href="#" onclick="hideshow()" class="break-words font-['Roboto'] font-medium text-[20px] text-[#7A7A7A] focus:text-[#4692B6] hover:text-[#4692B6]">
                    Logout
                </a>
            </div>
        </div>
        <div class="rounded-[40px] bg-[#FBFBFB] relative flex flex-col p-[62px_78px_149px_78px] w-full xl:w-[846px] h-[550px] xl:h-[642px] box-sizing-border">
            <div class="m-[0_0_7px_0] flex flex-row  w-full xl:w-[675.2px] box-sizing-border">
                <input id="currentPassword" type="password" class="rounded-[20px] bg-[#F1F0E8] focus:bg-white relative m-[0_0_3px_0] p-[18px_24px_17px_24px] w-full box-sizing-border break-words font-['Roboto'] font-medium text-[20px] text-[#B1B1B1] focus:text-[#4692B6] border-none outline-none focus:border-2 focus:border-[#4692B6]"
                    placeholder="Current password ">
                </input>
            </div>
            <div id="error" class="text-[#F14E2E] text-left mb-4 ml-5 text-[13px] md:text-[16px] hidden"></div>



            <div class="m-[0_0_7px_0] flex flex-row self-start w-full xl:w-[675.2px] box-sizing-border">
                <input id="newPassword" type="password" class="rounded-[20px] bg-[#F1F0E8] focus:bg-white relative m-[20px_0_3px_0] p-[18px_24px_17px_24px] w-full box-sizing-border break-words font-['Roboto'] font-medium text-[20px] text-[#B1B1B1] focus:text-[#4692B6] border-none outline-none focus:border-2 focus:border-[#4692B6]"
                    placeholder="New password ">
                </input>
            </div>
            <div id="passwordError" class="text-[#F14E2E] text-left mb-4 ml-5 text-[13px] md:text-[16px] hidden"></div>


            <div class="m-[0_0_7px_0] flex flex-row self-start w-full xl:w-[675.2px] box-sizing-border">
                <input id="ConfirmPassword" type="password" class="rounded-[20px] bg-[#F1F0E8] focus:bg-white relative m-[20px_0_3px_0] p-[18px_24px_17px_24px] w-full box-sizing-border break-words font-['Roboto'] font-medium text-[20px] text-[#B1B1B1] focus:text-[#4692B6] border-none outline-none focus:border-2 focus:border-[#4692B6]"
                    placeholder="confirmPassword ">
                </input>
            </div>
            <div id="confirmError" class="text-[#F14E2E] text-left mb-4 ml-5 text-[13px] md:text-[16px] hidden"></div>

            <div class="rounded-[40px] bg-[#4692B6] relative m-[50px_0_16px_0] flex flex-row justify-center p-[18px_0.9px_6px_0] cursor-pointer w-full xl:w-[690px] box-sizing-border hover:shadow-md hover:shadow-SteelBlue/20">
                <button type="submit" onclick="checkFormValidity(event)" class="break-words font-['Roboto'] font-medium text-[24px] text-[#FFFFFF] cursor-pointer">
                    Update change
                </button>
            </div>
            <div class="rounded-[40px] border-[1px_solid_#4692B6] bg-[#FFFFFF] relative flex flex-row justify-center cursor-pointer p-[12px_17.7px_12px_0] w-full xl:w-[690px] box-sizing-border hover:shadow-md hover:shadow-SteelBlue/20 border-2 border-[#4692B6]">
                <button class="break-words font-['Roboto'] font-medium text-[24px] text-[#4692B6] cursor-pointer">
              Cancel
                </button>
            </div>
        </div>
    </div>
    <div id="logout" class="backdrop-blur-[1px] bg-[rgba(64,64,64,0.5)] absolute left-[0px] top-[0px] right-[0px] bottom-[0px] items-center h-[850px] hidden">
        <div class="rounded-[32px] border-[1px_solid_#4692B6] bg-[#F3F3F3] absolute left-[50%] top-[155px] translate-x-[-50%] mx-auto w-[470px] md:w-[637px] h-[514px]">
            <div class="relative m-[120px_0_74px_2px] break-words font-['Roboto'] text-center font-semibold text-[28px] md:text-[32px] text-[#676767]">
                are you sure you want to logout?
            </div>
            <button class="mx-auto rounded-[40px] bg-[#4692B6] relative m-[0_0_16px_0] flex flex-row justify-center p-[18px_0.9px_6px_0] w-[450px] lg:w-[479px] box-sizing-border hover:shadow-md hover:shadow-SteelBlue/20 break-words font-['Roboto'] font-medium text-[24px] text-[#FFFFFF] cursor-pointer">
              Logout
            </button>

            <a onclick="hideshow()" class="mx-auto rounded-[40px] border-[1px_solid_#4692B6] bg-[#FFFFFF] relative flex justify-center p-[12px_17.7px_12px_0] w-[450px] lg:w-[479px] box-sizing-border hover:shadow-md hover:shadow-SteelBlue/20 border-2 border-[#4692B6] break-words font-['Roboto'] font-medium text-[24px] text-[#4692B6] cursor-pointer">
                Cancel
            </a>

        </div>

    </div>

    <script>
        function checkFormValidity(event) {
            event.preventDefault();

            var currentPassword = document.getElementById('currentPassword').value;
            var newPassword = document.getElementById('newPassword').value;
            var confirmPassword = document.getElementById('ConfirmPassword').value;
            var errorDiv = document.getElementById('error');
            var passwordErrorDiv = document.getElementById('passwordError');
            var confirmErrorDiv = document.getElementById('confirmError');

            // Reset error messages
            errorDiv.classList.add('hidden');
            passwordErrorDiv.classList.add('hidden');
            confirmErrorDiv.classList.add('hidden');

            // Check if current password is empty
            if (currentPassword === '') {
                errorDiv.innerText = 'Current password is required.';
                document.getElementById("currentPassword").style.border = "1px solid #F14E2E";
                errorDiv.classList.remove('hidden');
                return;
            }

            // Check if new password is empty
            if (newPassword === '') {
                passwordErrorDiv.innerText = 'New password is required.';
                document.getElementById("newPassword").style.border = "1px solid #F14E2E";
                passwordErrorDiv.classList.remove('hidden');
                return;
            }

            // Check if confirm password is empty
            if (confirmPassword === '') {
                confirmErrorDiv.innerText = 'Confirm password is required.';
                document.getElementById("ConfirmPassword").style.border = "1px solid #F14E2E";
                confirmErrorDiv.classList.remove('hidden');
                return;
            }

            // Check if password is correct
            if (currentPassword !== localStorage.getItem('currentPassword')) {
                errorDiv.innerHTML = "The password you entered is incorrect. Please try again.";
                errorDiv.classList.remove('hidden');
                return;
            }

            // Check if new password and confirm password match
            if (newPassword !== confirmPassword) {
                confirmErrorDiv.innerText = 'Passwords do not match.';
                confirmErrorDiv.classList.remove('hidden');
                return;
            }

            const accessToken = localStorage.getItem('token');
            const myHeaders = new Headers();
            myHeaders.append("Accept", "application/json");
            const token = localStorage.getItem("token")
            myHeaders.append("Authorization", `Bearer ${token}`);
            myHeaders.append("Content-Type", "application/json");
            const updatePassword = JSON.stringify({
                "current_password": currentPassword,
                "new_password": newPassword,
                "new_password_confirmation": confirmPassword,
            });
            const requestOptions = {
                method: "POST",
                headers: myHeaders,
                body: updatePassword,
                redirect: "follow"
            };

            console.log(updatePassword);

            fetch('https://0702-156-197-135-58.ngrok-free.app/api/v1/change-password', requestOptions)
                .then(data => {
                    console.log('Success:', data);
                    console.log(accessToken)
                    window.location.href = 'index.html';
                })
                .catch((error) => {
                    console.error('Error:', error);
                });

            // Reset the form fields
            document.getElementById('currentPassword').value = '';
            document.getElementById('newPassword').value = '';
            document.getElementById('ConfirmPassword').value = '';
        }
    </script>
    <script src="../src/main.js"></script>


</body>

</html>